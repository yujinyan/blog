{"version":3,"sources":["webpack:///path---flatmap-3c484ba57b4a93d8f948.js","webpack:///./.cache/json/flatmap.json"],"names":["webpackJsonp","514","module","exports","data","site","siteMetadata","title","author","markdownRemark","id","html","frontmatter","date","pathContext","slug","previous","fields","next"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,cAAgBC,MAAA,UAAAC,OAAA,cAAwCC,gBAAmBC,GAAA,sFAAAC,KAAA,69xBAAqwyBC,aAA63BL,MAAA,eAAAM,KAAA,uBAAoDC,aAAgBC,KAAA,YAAAC,UAA+BC,QAAUF,KAAA,sBAA4BH,aAAgBL,MAAA,aAAoBW,MAASD,QAAUF,KAAA,iCAAuCH,aAAgBL,MAAA","file":"path---flatmap-3c484ba57b4a93d8f948.js","sourcesContent":["webpackJsonp([205135340147305],{\n\n/***/ 514:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"ğŸŸ Blog\",\"author\":\"Yu Jinyan\"}},\"markdownRemark\":{\"id\":\"C:/Users/yujin/code/blog-gatsby/posts/flatmap.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>å‰ä¸€é˜µå­åœ¨ Twitter ä¸Šçœ‹åˆ° GitHub ä¸Šâœ¨æ˜Ÿæ˜Ÿâœ¨æœ€å¤šçš„ Sindre Sorhus åˆ†äº«äº†ä¸€æ®µ Swift ä»£ç </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-swift\\\"><code class=\\\"language-swift\\\"><span class=\\\"token comment\\\">// view.subviews(ofType: BoxView.self)</span>\\nfun subviews<span class=\\\"token operator\\\">&lt;</span>T<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">NSView</span><span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">(</span>ofType type<span class=\\\"token punctuation\\\">:</span> T<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">Type</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">[</span>T<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> subviews<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token keyword\\\">as</span><span class=\\\"token operator\\\">?</span> T<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>æ­£å¥½å€Ÿæœºè·Ÿ Swifter å¥½å‹äº¤æµåˆ‡ç£‹ä¸€ç•ªï¼Œç„¶å‘ç°è‡ªå·±æ¦‚å¿µæœ‰äº›æ¨¡ç³Šè¿˜éœ€ä¿®ç‚¼ä¸€ä¸‹ï¼Œæ‰€ä»¥å‘ä¸ªæ€»ç»“çš„æ–‡ç« äº¤ä½œä¸šã€‚</p>\\n<h2>æ•°ç»„</h2>\\n<p>ğŸ’¡ ç®€è€Œè¨€ä¹‹ï¼ŒflatMap å°±æ˜¯ä¸¤ä¸ªæ­¥éª¤ï¼Œå…ˆ map å† flattenï¼š</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-swift\\\"><code class=\\\"language-swift\\\"><span class=\\\"token keyword\\\">let</span> nested <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">5</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">6</span><span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token keyword\\\">let</span> flattened <span class=\\\"token operator\\\">=</span> nested<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">return</span> $<span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token builtin\\\">map</span> <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">*</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token comment\\\">// [2, 4, 9, 16, 25, 36]</span></code></pre>\\n      </div>\\n<p>ä¼ å…¥ flatMap é—­åŒ…ä¸­çš„ <code class=\\\"language-text\\\">$0</code> åœ¨å¾ªç¯ä¸­ä¾æ¬¡ç­‰äº <code class=\\\"language-text\\\">[1, 2]</code>ï¼Œ<code class=\\\"language-text\\\">[3, 4]</code>ï¼Œ<code class=\\\"language-text\\\">[5, 6]</code>ï¼Œæˆ‘ä»¬å¯¹é‡Œå±‚æ•°ç»„è¿›è¡Œ map å˜æ¢ä¹‹åï¼ŒflatMap å‡½æ•°ä¼šå°†äº§ç”Ÿçš„ç»“æœæ‹¼æ¥åœ¨ä¸€èµ·æˆä¸ºä¸€ä¸ªæ–°çš„ä¸€ç»´æ•°ç»„ã€‚</p>\\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å­¦ä¹  flatMap çš„æ—¶å€™ä¼¼ä¹å®¹æ˜“é™·å…¥äºŒç»´æ•°ç»„è½¬ä¸ºä¸€ç»´æ•°ç»„çš„å±€é™ã€‚å®é™…ä¸Š flatMap çš„è¯­æ„ä¸è¢« flatMap æ“ä½œçš„å¯¹è±¡å¹¶æ²¡æœ‰å¤ªå¤§å…³ç³»ã€‚å…³é”®æ˜¯ä¼ å…¥ flatMap çš„é—­åŒ…å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œ map çš„é—­åŒ…å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå€¼ã€‚</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-swift\\\"><code class=\\\"language-swift\\\"><span class=\\\"token keyword\\\">let</span> ints <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">]</span>\\n \\nnumbers<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token punctuation\\\">[</span>$<span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> $<span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\">// [1, 1, 2, 2, 3, 3]</span>\\nnumbers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token builtin\\\">map</span> <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\">// [1, 2, 3]</span>\\nnumbers<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\">// [1, 2, 3]ï¼Œå¦‚æœé—­åŒ…å‡½æ•°ä¸è¿”å›æ•°ç»„ç±»å‹åˆ™å’Œ map æ•ˆæœä¸€æ ·</span></code></pre>\\n      </div>\\n<p>æ‰€ä»¥è¯´ flatMap åªæ˜¯å°†æ¯ä¸€æ¬¡ map å¾—åˆ°çš„æ•°ç»„å…¨éƒ¨æ‹¼åœ¨ä¸€èµ·åˆæˆä¸€ä¸ªæ•°ç»„ã€‚</p>\\n<p>JS çš„æ•°ç»„æ¯”è¾ƒé—æ†¾åœ°æ²¡æœ‰æä¾› flatMap æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±å®ç°ï¼š</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\">Array<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">flatMap</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>f<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// å…ˆ mapï¼Œç„¶åå† concat ç»“æœ</span>\\n    <span class=\\\"token keyword\\\">return</span> Array<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span>concat<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">apply</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>f<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h2>å¯é€‰å€¼</h2>\\n<p>Java 8 çš„å¯é€‰å€¼ï¼š</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-java\\\"><code class=\\\"language-java\\\"><span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Computer</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">private</span> Optional<span class=\\\"token operator\\\">&lt;</span>Soundcard<span class=\\\"token operator\\\">></span> soundcard <span class=\\\"token operator\\\">=</span> Optional<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">empty</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">public</span> Optional<span class=\\\"token operator\\\">&lt;</span>Soundcard<span class=\\\"token operator\\\">></span> <span class=\\\"token function\\\">getSoundcard</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> soundcard<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n \\n<span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Soundcard</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">private</span> Optional<span class=\\\"token operator\\\">&lt;</span>USB<span class=\\\"token operator\\\">></span> usb <span class=\\\"token operator\\\">=</span> Optional<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">empty</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">public</span> Optional<span class=\\\"token operator\\\">&lt;</span>USB<span class=\\\"token operator\\\">></span> <span class=\\\"token function\\\">getUSB</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> usb<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n \\n<span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">USB</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">public</span> String <span class=\\\"token function\\\">getVersion</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token string\\\">\\\"3.0\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n \\n<span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Main</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">static</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">main</span><span class=\\\"token punctuation\\\">(</span>String<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> args<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        Optional<span class=\\\"token operator\\\">&lt;</span>Computer<span class=\\\"token operator\\\">></span> computer <span class=\\\"token operator\\\">=</span> Optional<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">of</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Computer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        String name <span class=\\\"token operator\\\">=</span> computer\\n                <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>Computer<span class=\\\"token operator\\\">:</span><span class=\\\"token operator\\\">:</span>getSoundcard<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">// ğŸ‘ˆ</span>\\n                <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>Soundcard<span class=\\\"token operator\\\">:</span><span class=\\\"token operator\\\">:</span>getUSB<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">// ğŸ‘ˆ</span>\\n                <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>USB<span class=\\\"token operator\\\">:</span><span class=\\\"token operator\\\">:</span>getVersion<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">// ğŸ‘ˆ</span>\\n                <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">orElse</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"UNKNOWN\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n \\n        System<span class=\\\"token punctuation\\\">.</span>out<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">println</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// \\\"UNKNOWN\\\"</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>è¿™é‡Œçš„ Optional æ˜¯ä¸€ä¸ªé€šè¿‡æ³›å‹åŒ…è£¹å…¶ä»–ç±»å‹çš„å®¹å™¨ã€‚Optional<T> å¯ä»¥åŒ…è£¹ç±»å‹ä¸º T çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç©ºã€‚</p>\\n<p><code class=\\\"language-text\\\">flatMap</code> åœ¨è¿™å¥— api é‡Œèµ·åˆ°äº†ä¼ é€’ Optional çš„ä½œç”¨ã€‚è§‚å¯Ÿ <code class=\\\"language-text\\\">flatMap</code> æ¥å—çš„å‡½æ•°çš„ç±»å‹éƒ½æ˜¯ <code class=\\\"language-text\\\">T-&gt;Optional&lt;U&gt;</code> ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ“ä½œç¬¦æ‹¿åˆ° Optional å®¹å™¨å†…çš„å€¼ï¼Œç„¶åè¿”å›äº†ä¸€ä¸ªæ–°çš„ Optional å®¹å™¨ï¼Œå…¶ä¸­åŒ…å«çš„å€¼çš„ç±»å‹æœªå¿…å’ŒåŸå…ˆçš„ä¸€è‡´ã€‚ç”±äºç©ºå¯¹è±¡ä¸å†ä»¥ <code class=\\\"language-text\\\">null</code> çš„å½¢å¼å‡ºç°ï¼Œè€Œæ˜¯è¢«åŒ…åœ¨äº† Optional å®¹å™¨ä¹‹ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥é“¾å¼è°ƒç”¨ï¼Œé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚å¦‚æœåœ¨è°ƒç”¨çš„è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ª Optional ä¸­ä¸ºç©ºå€¼ï¼Œåˆ™æœ€ç»ˆè¿”å›é€šè¿‡ <code class=\\\"language-text\\\">orElse</code> æä¾›çš„é»˜è®¤å€¼ã€‚</p>\\n<p>ç›¸æ¯” Java å€ŸåŠ©æ³›å‹ï¼Œåœ¨æ ‡å‡†åº“ä¸­å®ç° Optional è¾…åŠ©ç±»ï¼ŒSwift æœ‰ä¸“é—¨çš„è¯­æ³• (Syntax) æ¥è¡¨è¾¾å¯é€‰å€¼ï¼Œå†™èµ·æ¥å¯èƒ½æ›´çˆ½ä¸€äº›ã€‚</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-swift\\\"><code class=\\\"language-swift\\\"><span class=\\\"token keyword\\\">let</span> optionalNumbers <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token constant\\\">nil</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">]</span>\\nnumbers<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\">// [1, 2, 3]</span></code></pre>\\n      </div>\\n<p>Swift çš„ flatMap è¿˜æœ‰æ¯”è¾ƒå¥‡ç‰¹çš„ä½œç”¨ï¼šä¼šè‡ªåŠ¨ filter æ‰ nilã€‚ä¸è¿‡ä»”ç»†ä¸€æƒ³ä¹Ÿæ˜¯ç¬¦åˆ flatMap çš„è¯­ä¹‰çš„ã€‚ä¸Šé¢ <code class=\\\"language-text\\\">optionNumbers</code> çš„ç±»å‹æ˜¯ <code class=\\\"language-text\\\">[Int?]</code>ï¼Œ ç»è¿‡ flatMap é—­åŒ…å‡½æ•°çš„è½¬æ¢ï¼Œæ¯ä¸€ä¸ª <code class=\\\"language-text\\\">Int?</code> å˜æˆäº† <code class=\\\"language-text\\\">T?</code> æœ€ç»ˆ flatMap ä¼šæ‹†æ‰å¯é€‰å€¼çš„åŒ…è£¹è¿”å› <code class=\\\"language-text\\\">T</code></p>\\n<p>å¼€å¤´é‚£æ®µä¼˜é›…çš„ä»£ç å°±æ˜¯ç”¨äº†è¿™ä¸ªç‰¹æ€§ã€‚Swift çš„ <code class=\\\"language-text\\\">as?</code> å°è¯•å°†å¯¹è±¡ cast ä¸ºä¸€ä¸ªç±»å‹ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯é€‰å€¼ï¼Œå¦‚æœ cast å¤±è´¥åˆ™ä¸º nilï¼Œè¿™æ ·ç±»å‹ä¸ç¬¦åˆä¼ å…¥ç±»å‹çš„ view å°±è¢«ç­›é€‰æ‰äº†ã€‚</p>\\n<p>åœ¨ JS é‡Œé¢ç±»ä¼¼çš„æ“ä½œè¿˜æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡ <code class=\\\"language-text\\\">filter</code>ï¼Œä¼¼ä¹æ¯”ç”¨ <code class=\\\"language-text\\\">flatMap</code> æ›´åŠ ç›´æ¥ä¸€äº›</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>Boolean<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">// [1, 2, 3]</span></code></pre>\\n      </div>\\n<h2>Rx</h2>\\n<p>å…ˆç®€å•ç²—æš´åœ°è´´ä¸€æ®µæ›¾ç»å†™çš„ Android å³æ—¶æœç´¢åŠŸèƒ½ç›¸å…³çš„ä»£ç ï¼ŒçœŸæ˜¯è”šä¸ºå£®è§‚ ğŸ˜‚</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-java\\\"><code class=\\\"language-java\\\">RxTextView<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">textChanges</span><span class=\\\"token punctuation\\\">(</span>etSearch<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">debounce</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">500</span><span class=\\\"token punctuation\\\">,</span> TimeUnit<span class=\\\"token punctuation\\\">.</span>MILLISECONDS<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">observeOn</span><span class=\\\"token punctuation\\\">(</span>AndroidSchedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">mainThread</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Predicate</span><span class=\\\"token operator\\\">&lt;</span>CharSequence<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token annotation punctuation\\\">@Override</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">boolean</span> <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token annotation punctuation\\\">@NonNull</span> CharSequence charSequence<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> Exception <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">!</span>TextUtils<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">isEmpty</span><span class=\\\"token punctuation\\\">(</span>charSequence<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Predicate</span><span class=\\\"token operator\\\">&lt;</span>CharSequence<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token annotation punctuation\\\">@Override</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">boolean</span> <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span>CharSequence charSequence<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> Exception <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">isSelected</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">observeOn</span><span class=\\\"token punctuation\\\">(</span>AndroidSchedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">mainThread</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">doOnNext</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Consumer</span><span class=\\\"token operator\\\">&lt;</span>CharSequence<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token annotation punctuation\\\">@Override</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">accept</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token annotation punctuation\\\">@NonNull</span> CharSequence charSequence<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> Exception <span class=\\\"token punctuation\\\">{</span>\\n      swipeRefreshLayout<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setRefreshing</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">observeOn</span><span class=\\\"token punctuation\\\">(</span>Schedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">io</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token comment\\\">// ğŸ‘‡</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">switchMap</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Function</span> <span class=\\\"token operator\\\">&lt;</span>CharSequence<span class=\\\"token punctuation\\\">,</span> Observable <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">List</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">>>></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token annotation punctuation\\\">@Override</span>\\n    <span class=\\\"token keyword\\\">public</span> Observable <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">List</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">>></span> <span class=\\\"token function\\\">apply</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token annotation punctuation\\\">@NonNull</span> CharSequence charSequence<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> Exception <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">callApi</span><span class=\\\"token punctuation\\\">(</span>charSequence<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">subscribeOn</span><span class=\\\"token punctuation\\\">(</span>Schedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">io</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">observeOn</span><span class=\\\"token punctuation\\\">(</span>AndroidSchedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">mainThread</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">subscribe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Observer</span><span class=\\\"token operator\\\">&lt;</span>List<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">>></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token annotation punctuation\\\">@override</span>\\n      <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">onNext</span><span class=\\\"token punctuation\\\">(</span>List<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">></span> searchTips<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        swipeRefreshLayout<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setRefreshing</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        data <span class=\\\"token operator\\\">=</span> searchTips<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">setUpContentView</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n      <span class=\\\"token comment\\\">// ...</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>åœ¨ Rx ç³»åˆ—ä¸­ï¼ŒObservable æ˜¯ä¸€ä¸ªå¯¹äº‹ä»¶æµçš„å°è£…ï¼Œæµå¯ä»¥çœ‹ä½œæ˜¯åŒ…è£¹ç€æ•°æ®çš„å®¹å™¨ã€‚è¿™é‡Œçš„ TextView çš„ textChange æ˜¯äº‹ä»¶æºï¼Œé¦–å…ˆç»è¿‡ä¸¤ä¸ª filterï¼ˆå¿½ç•¥ä¸€ä¸‹å…¶ä»–æ“ä½œçº¿ç¨‹ã€å‰¯ä½œç”¨çš„æ“ä½œç¬¦ï¼‰å°†ä¸€äº›ä¸ç¬¦åˆè¦æ±‚çš„äº‹ä»¶æµæ’é™¤åœ¨å¤–ï¼Œç„¶åç»è¿‡ switchMap æ“ä½œç¬¦ã€‚switchMap å’Œ flatMap ç”¨æ³•è¾ƒä¸ºç›¸ä¼¼ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å‘æœåŠ¡å™¨å‘é€è¯·æ±‚è·å–å³æ—¶æœç´¢çš„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œã€‚switchMap ç›¸æ¯” flatMap åœ¨æ¥å—åˆ°ä¸Šæ¸¸å‘è¿‡æ¥çš„æ–°æ•°æ®ä¹‹åï¼Œå‰é¢å°šæœªå®Œæˆçš„å¼‚æ­¥æ“ä½œä¼šç›´æ¥è¢«ä¸¢å¼ƒï¼Œå› æ­¤æ¯”è¾ƒç¬¦åˆè¿™ä¸ªåŠŸèƒ½åœºæ™¯ã€‚</p>\\n<p>å¯ä»¥å‘ç°ï¼Œä¸¤ä¸ª filter çš„é—­åŒ…å‡½æ•°çš„ç±»å‹ç›¸å½“äºæ˜¯ <code class=\\\"language-text\\\">string -&gt; bool</code>ï¼Œè€Œ switchMap çš„é—­åŒ…å‡½æ•°çš„ç±»å‹ç›¸å½“äº <code class=\\\"language-text\\\">string -&gt; Observable&lt;List&lt;?&gt;&gt;</code> ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª Observable å®¹å™¨ã€‚switchMap æ“ä½œç¬¦ä¼šå°†å…¶ä¸­çš„æ•°æ®å–å‡ºæ¥ï¼ˆä¹Ÿå°±æ˜¯ç­‰æ¥å£æ•°æ®è°ƒå‡ºæ¥ä¹‹åï¼‰æ”¾åˆ° Observable é‡Œä¼ é€’ä¸‹å»ã€‚</p>\\n<h2>å°ç»“</h2>\\n<p>å€ŸåŠ©ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ° flatMap çš„åŸºæœ¬è¯­ä¹‰æ˜¯ç›¸é€šçš„ã€‚åœ¨å­¦ä¹ è¿™äº›æ“ä½œç¬¦æ—¶æˆ–è®¸å¯ä»¥æ›´å¤šåœ°å…³æ³¨ä¼ å…¥çš„é—­åŒ…å‡½æ•°çš„ç±»å‹ä»¥åŠæ“ä½œç¬¦å˜æ¢çš„å®è´¨ã€‚ç›¸ä¿¡ flatMap ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹è¿˜æœ‰æ›´å¤šæœ‰è¶£çš„å†…å®¹å€¼å¾—ç»§ç»­å­¦ä¹ å‘æ˜ã€‚</p>\\n<h2>å‚è€ƒèµ„æ–™</h2>\\n<ul>\\n<li><a href=\\\"https://repl.it/@yujinyan1992/RxJS-vs-Array-Methods\\\">https://repl.it/@yujinyan1992/RxJS-vs-Array-Methods</a></li>\\n<li><a href=\\\"https://repl.it/@yujinyan1992/Learning-Swift%60\\\">https://repl.it/@yujinyan1992/Learning-Swift`</a></li>\\n<li><a href=\\\"https://www.natashatherobot.com/swift-2-flatmap/\\\">https://www.natashatherobot.com/swift-2-flatmap/</a></li>\\n<li><a href=\\\"https://gist.github.com/samgiles/762ee337dff48623e729\\\">https://gist.github.com/samgiles/762ee337dff48623e729</a></li>\\n<li><a href=\\\"http://www.infoq.com/cn/articles/swift-brain-gym-map-and-flatmap\\\">Swift çƒ§è„‘ä½“æ“ï¼ˆå››ï¼‰ - map å’Œ flatMap</a></li>\\n</ul>\",\"frontmatter\":{\"title\":\"è°ˆè°ˆ `flatMap`\",\"date\":\"November 25, 2017\"}}},\"pathContext\":{\"slug\":\"/flatmap/\",\"previous\":{\"fields\":{\"slug\":\"/centering-in-css/\"},\"frontmatter\":{\"title\":\"CSS å±…ä¸­å°ç»“\"}},\"next\":{\"fields\":{\"slug\":\"/define-constants-in-laravel/\"},\"frontmatter\":{\"title\":\"åœ¨ Laravel ä¸­ä¼˜é›…åœ°å®šä¹‰å¸¸é‡\"}}}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---flatmap-3c484ba57b4a93d8f948.js","module.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"ğŸŸ Blog\",\"author\":\"Yu Jinyan\"}},\"markdownRemark\":{\"id\":\"C:/Users/yujin/code/blog-gatsby/posts/flatmap.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>å‰ä¸€é˜µå­åœ¨ Twitter ä¸Šçœ‹åˆ° GitHub ä¸Šâœ¨æ˜Ÿæ˜Ÿâœ¨æœ€å¤šçš„ Sindre Sorhus åˆ†äº«äº†ä¸€æ®µ Swift ä»£ç </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-swift\\\"><code class=\\\"language-swift\\\"><span class=\\\"token comment\\\">// view.subviews(ofType: BoxView.self)</span>\\nfun subviews<span class=\\\"token operator\\\">&lt;</span>T<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">NSView</span><span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">(</span>ofType type<span class=\\\"token punctuation\\\">:</span> T<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">Type</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">[</span>T<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> subviews<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token keyword\\\">as</span><span class=\\\"token operator\\\">?</span> T<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>æ­£å¥½å€Ÿæœºè·Ÿ Swifter å¥½å‹äº¤æµåˆ‡ç£‹ä¸€ç•ªï¼Œç„¶å‘ç°è‡ªå·±æ¦‚å¿µæœ‰äº›æ¨¡ç³Šè¿˜éœ€ä¿®ç‚¼ä¸€ä¸‹ï¼Œæ‰€ä»¥å‘ä¸ªæ€»ç»“çš„æ–‡ç« äº¤ä½œä¸šã€‚</p>\\n<h2>æ•°ç»„</h2>\\n<p>ğŸ’¡ ç®€è€Œè¨€ä¹‹ï¼ŒflatMap å°±æ˜¯ä¸¤ä¸ªæ­¥éª¤ï¼Œå…ˆ map å† flattenï¼š</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-swift\\\"><code class=\\\"language-swift\\\"><span class=\\\"token keyword\\\">let</span> nested <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">5</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">6</span><span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token keyword\\\">let</span> flattened <span class=\\\"token operator\\\">=</span> nested<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">return</span> $<span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token builtin\\\">map</span> <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">*</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token comment\\\">// [2, 4, 9, 16, 25, 36]</span></code></pre>\\n      </div>\\n<p>ä¼ å…¥ flatMap é—­åŒ…ä¸­çš„ <code class=\\\"language-text\\\">$0</code> åœ¨å¾ªç¯ä¸­ä¾æ¬¡ç­‰äº <code class=\\\"language-text\\\">[1, 2]</code>ï¼Œ<code class=\\\"language-text\\\">[3, 4]</code>ï¼Œ<code class=\\\"language-text\\\">[5, 6]</code>ï¼Œæˆ‘ä»¬å¯¹é‡Œå±‚æ•°ç»„è¿›è¡Œ map å˜æ¢ä¹‹åï¼ŒflatMap å‡½æ•°ä¼šå°†äº§ç”Ÿçš„ç»“æœæ‹¼æ¥åœ¨ä¸€èµ·æˆä¸ºä¸€ä¸ªæ–°çš„ä¸€ç»´æ•°ç»„ã€‚</p>\\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å­¦ä¹  flatMap çš„æ—¶å€™ä¼¼ä¹å®¹æ˜“é™·å…¥äºŒç»´æ•°ç»„è½¬ä¸ºä¸€ç»´æ•°ç»„çš„å±€é™ã€‚å®é™…ä¸Š flatMap çš„è¯­æ„ä¸è¢« flatMap æ“ä½œçš„å¯¹è±¡å¹¶æ²¡æœ‰å¤ªå¤§å…³ç³»ã€‚å…³é”®æ˜¯ä¼ å…¥ flatMap çš„é—­åŒ…å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œ map çš„é—­åŒ…å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå€¼ã€‚</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-swift\\\"><code class=\\\"language-swift\\\"><span class=\\\"token keyword\\\">let</span> ints <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">]</span>\\n \\nnumbers<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token punctuation\\\">[</span>$<span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> $<span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\">// [1, 1, 2, 2, 3, 3]</span>\\nnumbers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token builtin\\\">map</span> <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\">// [1, 2, 3]</span>\\nnumbers<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\">// [1, 2, 3]ï¼Œå¦‚æœé—­åŒ…å‡½æ•°ä¸è¿”å›æ•°ç»„ç±»å‹åˆ™å’Œ map æ•ˆæœä¸€æ ·</span></code></pre>\\n      </div>\\n<p>æ‰€ä»¥è¯´ flatMap åªæ˜¯å°†æ¯ä¸€æ¬¡ map å¾—åˆ°çš„æ•°ç»„å…¨éƒ¨æ‹¼åœ¨ä¸€èµ·åˆæˆä¸€ä¸ªæ•°ç»„ã€‚</p>\\n<p>JS çš„æ•°ç»„æ¯”è¾ƒé—æ†¾åœ°æ²¡æœ‰æä¾› flatMap æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±å®ç°ï¼š</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\">Array<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">flatMap</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>f<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// å…ˆ mapï¼Œç„¶åå† concat ç»“æœ</span>\\n    <span class=\\\"token keyword\\\">return</span> Array<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span>concat<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">apply</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>f<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h2>å¯é€‰å€¼</h2>\\n<p>Java 8 çš„å¯é€‰å€¼ï¼š</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-java\\\"><code class=\\\"language-java\\\"><span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Computer</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">private</span> Optional<span class=\\\"token operator\\\">&lt;</span>Soundcard<span class=\\\"token operator\\\">></span> soundcard <span class=\\\"token operator\\\">=</span> Optional<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">empty</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">public</span> Optional<span class=\\\"token operator\\\">&lt;</span>Soundcard<span class=\\\"token operator\\\">></span> <span class=\\\"token function\\\">getSoundcard</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> soundcard<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n \\n<span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Soundcard</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">private</span> Optional<span class=\\\"token operator\\\">&lt;</span>USB<span class=\\\"token operator\\\">></span> usb <span class=\\\"token operator\\\">=</span> Optional<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">empty</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">public</span> Optional<span class=\\\"token operator\\\">&lt;</span>USB<span class=\\\"token operator\\\">></span> <span class=\\\"token function\\\">getUSB</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> usb<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n \\n<span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">USB</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">public</span> String <span class=\\\"token function\\\">getVersion</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token string\\\">\\\"3.0\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n \\n<span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Main</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">static</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">main</span><span class=\\\"token punctuation\\\">(</span>String<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> args<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        Optional<span class=\\\"token operator\\\">&lt;</span>Computer<span class=\\\"token operator\\\">></span> computer <span class=\\\"token operator\\\">=</span> Optional<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">of</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Computer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        String name <span class=\\\"token operator\\\">=</span> computer\\n                <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>Computer<span class=\\\"token operator\\\">:</span><span class=\\\"token operator\\\">:</span>getSoundcard<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">// ğŸ‘ˆ</span>\\n                <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>Soundcard<span class=\\\"token operator\\\">:</span><span class=\\\"token operator\\\">:</span>getUSB<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">// ğŸ‘ˆ</span>\\n                <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>USB<span class=\\\"token operator\\\">:</span><span class=\\\"token operator\\\">:</span>getVersion<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">// ğŸ‘ˆ</span>\\n                <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">orElse</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"UNKNOWN\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n \\n        System<span class=\\\"token punctuation\\\">.</span>out<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">println</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// \\\"UNKNOWN\\\"</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>è¿™é‡Œçš„ Optional æ˜¯ä¸€ä¸ªé€šè¿‡æ³›å‹åŒ…è£¹å…¶ä»–ç±»å‹çš„å®¹å™¨ã€‚Optional<T> å¯ä»¥åŒ…è£¹ç±»å‹ä¸º T çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç©ºã€‚</p>\\n<p><code class=\\\"language-text\\\">flatMap</code> åœ¨è¿™å¥— api é‡Œèµ·åˆ°äº†ä¼ é€’ Optional çš„ä½œç”¨ã€‚è§‚å¯Ÿ <code class=\\\"language-text\\\">flatMap</code> æ¥å—çš„å‡½æ•°çš„ç±»å‹éƒ½æ˜¯ <code class=\\\"language-text\\\">T-&gt;Optional&lt;U&gt;</code> ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ“ä½œç¬¦æ‹¿åˆ° Optional å®¹å™¨å†…çš„å€¼ï¼Œç„¶åè¿”å›äº†ä¸€ä¸ªæ–°çš„ Optional å®¹å™¨ï¼Œå…¶ä¸­åŒ…å«çš„å€¼çš„ç±»å‹æœªå¿…å’ŒåŸå…ˆçš„ä¸€è‡´ã€‚ç”±äºç©ºå¯¹è±¡ä¸å†ä»¥ <code class=\\\"language-text\\\">null</code> çš„å½¢å¼å‡ºç°ï¼Œè€Œæ˜¯è¢«åŒ…åœ¨äº† Optional å®¹å™¨ä¹‹ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥é“¾å¼è°ƒç”¨ï¼Œé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚å¦‚æœåœ¨è°ƒç”¨çš„è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ª Optional ä¸­ä¸ºç©ºå€¼ï¼Œåˆ™æœ€ç»ˆè¿”å›é€šè¿‡ <code class=\\\"language-text\\\">orElse</code> æä¾›çš„é»˜è®¤å€¼ã€‚</p>\\n<p>ç›¸æ¯” Java å€ŸåŠ©æ³›å‹ï¼Œåœ¨æ ‡å‡†åº“ä¸­å®ç° Optional è¾…åŠ©ç±»ï¼ŒSwift æœ‰ä¸“é—¨çš„è¯­æ³• (Syntax) æ¥è¡¨è¾¾å¯é€‰å€¼ï¼Œå†™èµ·æ¥å¯èƒ½æ›´çˆ½ä¸€äº›ã€‚</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-swift\\\"><code class=\\\"language-swift\\\"><span class=\\\"token keyword\\\">let</span> optionalNumbers <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token constant\\\">nil</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">]</span>\\nnumbers<span class=\\\"token punctuation\\\">.</span>flatMap <span class=\\\"token punctuation\\\">{</span> $<span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\">// [1, 2, 3]</span></code></pre>\\n      </div>\\n<p>Swift çš„ flatMap è¿˜æœ‰æ¯”è¾ƒå¥‡ç‰¹çš„ä½œç”¨ï¼šä¼šè‡ªåŠ¨ filter æ‰ nilã€‚ä¸è¿‡ä»”ç»†ä¸€æƒ³ä¹Ÿæ˜¯ç¬¦åˆ flatMap çš„è¯­ä¹‰çš„ã€‚ä¸Šé¢ <code class=\\\"language-text\\\">optionNumbers</code> çš„ç±»å‹æ˜¯ <code class=\\\"language-text\\\">[Int?]</code>ï¼Œ ç»è¿‡ flatMap é—­åŒ…å‡½æ•°çš„è½¬æ¢ï¼Œæ¯ä¸€ä¸ª <code class=\\\"language-text\\\">Int?</code> å˜æˆäº† <code class=\\\"language-text\\\">T?</code> æœ€ç»ˆ flatMap ä¼šæ‹†æ‰å¯é€‰å€¼çš„åŒ…è£¹è¿”å› <code class=\\\"language-text\\\">T</code></p>\\n<p>å¼€å¤´é‚£æ®µä¼˜é›…çš„ä»£ç å°±æ˜¯ç”¨äº†è¿™ä¸ªç‰¹æ€§ã€‚Swift çš„ <code class=\\\"language-text\\\">as?</code> å°è¯•å°†å¯¹è±¡ cast ä¸ºä¸€ä¸ªç±»å‹ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯é€‰å€¼ï¼Œå¦‚æœ cast å¤±è´¥åˆ™ä¸º nilï¼Œè¿™æ ·ç±»å‹ä¸ç¬¦åˆä¼ å…¥ç±»å‹çš„ view å°±è¢«ç­›é€‰æ‰äº†ã€‚</p>\\n<p>åœ¨ JS é‡Œé¢ç±»ä¼¼çš„æ“ä½œè¿˜æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡ <code class=\\\"language-text\\\">filter</code>ï¼Œä¼¼ä¹æ¯”ç”¨ <code class=\\\"language-text\\\">flatMap</code> æ›´åŠ ç›´æ¥ä¸€äº›</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>Boolean<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">// [1, 2, 3]</span></code></pre>\\n      </div>\\n<h2>Rx</h2>\\n<p>å…ˆç®€å•ç²—æš´åœ°è´´ä¸€æ®µæ›¾ç»å†™çš„ Android å³æ—¶æœç´¢åŠŸèƒ½ç›¸å…³çš„ä»£ç ï¼ŒçœŸæ˜¯è”šä¸ºå£®è§‚ ğŸ˜‚</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-java\\\"><code class=\\\"language-java\\\">RxTextView<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">textChanges</span><span class=\\\"token punctuation\\\">(</span>etSearch<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">debounce</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">500</span><span class=\\\"token punctuation\\\">,</span> TimeUnit<span class=\\\"token punctuation\\\">.</span>MILLISECONDS<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">observeOn</span><span class=\\\"token punctuation\\\">(</span>AndroidSchedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">mainThread</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Predicate</span><span class=\\\"token operator\\\">&lt;</span>CharSequence<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token annotation punctuation\\\">@Override</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">boolean</span> <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token annotation punctuation\\\">@NonNull</span> CharSequence charSequence<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> Exception <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">!</span>TextUtils<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">isEmpty</span><span class=\\\"token punctuation\\\">(</span>charSequence<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Predicate</span><span class=\\\"token operator\\\">&lt;</span>CharSequence<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token annotation punctuation\\\">@Override</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">boolean</span> <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span>CharSequence charSequence<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> Exception <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">isSelected</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">observeOn</span><span class=\\\"token punctuation\\\">(</span>AndroidSchedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">mainThread</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">doOnNext</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Consumer</span><span class=\\\"token operator\\\">&lt;</span>CharSequence<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token annotation punctuation\\\">@Override</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">accept</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token annotation punctuation\\\">@NonNull</span> CharSequence charSequence<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> Exception <span class=\\\"token punctuation\\\">{</span>\\n      swipeRefreshLayout<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setRefreshing</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">observeOn</span><span class=\\\"token punctuation\\\">(</span>Schedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">io</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token comment\\\">// ğŸ‘‡</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">switchMap</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Function</span> <span class=\\\"token operator\\\">&lt;</span>CharSequence<span class=\\\"token punctuation\\\">,</span> Observable <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">List</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">>>></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token annotation punctuation\\\">@Override</span>\\n    <span class=\\\"token keyword\\\">public</span> Observable <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">List</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">>></span> <span class=\\\"token function\\\">apply</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token annotation punctuation\\\">@NonNull</span> CharSequence charSequence<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> Exception <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">callApi</span><span class=\\\"token punctuation\\\">(</span>charSequence<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">subscribeOn</span><span class=\\\"token punctuation\\\">(</span>Schedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">io</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">observeOn</span><span class=\\\"token punctuation\\\">(</span>AndroidSchedulers<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">mainThread</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">subscribe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Observer</span><span class=\\\"token operator\\\">&lt;</span>List<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">>></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token annotation punctuation\\\">@override</span>\\n      <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">onNext</span><span class=\\\"token punctuation\\\">(</span>List<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">></span> searchTips<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        swipeRefreshLayout<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setRefreshing</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        data <span class=\\\"token operator\\\">=</span> searchTips<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">setUpContentView</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n      <span class=\\\"token comment\\\">// ...</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>åœ¨ Rx ç³»åˆ—ä¸­ï¼ŒObservable æ˜¯ä¸€ä¸ªå¯¹äº‹ä»¶æµçš„å°è£…ï¼Œæµå¯ä»¥çœ‹ä½œæ˜¯åŒ…è£¹ç€æ•°æ®çš„å®¹å™¨ã€‚è¿™é‡Œçš„ TextView çš„ textChange æ˜¯äº‹ä»¶æºï¼Œé¦–å…ˆç»è¿‡ä¸¤ä¸ª filterï¼ˆå¿½ç•¥ä¸€ä¸‹å…¶ä»–æ“ä½œçº¿ç¨‹ã€å‰¯ä½œç”¨çš„æ“ä½œç¬¦ï¼‰å°†ä¸€äº›ä¸ç¬¦åˆè¦æ±‚çš„äº‹ä»¶æµæ’é™¤åœ¨å¤–ï¼Œç„¶åç»è¿‡ switchMap æ“ä½œç¬¦ã€‚switchMap å’Œ flatMap ç”¨æ³•è¾ƒä¸ºç›¸ä¼¼ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å‘æœåŠ¡å™¨å‘é€è¯·æ±‚è·å–å³æ—¶æœç´¢çš„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œã€‚switchMap ç›¸æ¯” flatMap åœ¨æ¥å—åˆ°ä¸Šæ¸¸å‘è¿‡æ¥çš„æ–°æ•°æ®ä¹‹åï¼Œå‰é¢å°šæœªå®Œæˆçš„å¼‚æ­¥æ“ä½œä¼šç›´æ¥è¢«ä¸¢å¼ƒï¼Œå› æ­¤æ¯”è¾ƒç¬¦åˆè¿™ä¸ªåŠŸèƒ½åœºæ™¯ã€‚</p>\\n<p>å¯ä»¥å‘ç°ï¼Œä¸¤ä¸ª filter çš„é—­åŒ…å‡½æ•°çš„ç±»å‹ç›¸å½“äºæ˜¯ <code class=\\\"language-text\\\">string -&gt; bool</code>ï¼Œè€Œ switchMap çš„é—­åŒ…å‡½æ•°çš„ç±»å‹ç›¸å½“äº <code class=\\\"language-text\\\">string -&gt; Observable&lt;List&lt;?&gt;&gt;</code> ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª Observable å®¹å™¨ã€‚switchMap æ“ä½œç¬¦ä¼šå°†å…¶ä¸­çš„æ•°æ®å–å‡ºæ¥ï¼ˆä¹Ÿå°±æ˜¯ç­‰æ¥å£æ•°æ®è°ƒå‡ºæ¥ä¹‹åï¼‰æ”¾åˆ° Observable é‡Œä¼ é€’ä¸‹å»ã€‚</p>\\n<h2>å°ç»“</h2>\\n<p>å€ŸåŠ©ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ° flatMap çš„åŸºæœ¬è¯­ä¹‰æ˜¯ç›¸é€šçš„ã€‚åœ¨å­¦ä¹ è¿™äº›æ“ä½œç¬¦æ—¶æˆ–è®¸å¯ä»¥æ›´å¤šåœ°å…³æ³¨ä¼ å…¥çš„é—­åŒ…å‡½æ•°çš„ç±»å‹ä»¥åŠæ“ä½œç¬¦å˜æ¢çš„å®è´¨ã€‚ç›¸ä¿¡ flatMap ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹è¿˜æœ‰æ›´å¤šæœ‰è¶£çš„å†…å®¹å€¼å¾—ç»§ç»­å­¦ä¹ å‘æ˜ã€‚</p>\\n<h2>å‚è€ƒèµ„æ–™</h2>\\n<ul>\\n<li><a href=\\\"https://repl.it/@yujinyan1992/RxJS-vs-Array-Methods\\\">https://repl.it/@yujinyan1992/RxJS-vs-Array-Methods</a></li>\\n<li><a href=\\\"https://repl.it/@yujinyan1992/Learning-Swift%60\\\">https://repl.it/@yujinyan1992/Learning-Swift`</a></li>\\n<li><a href=\\\"https://www.natashatherobot.com/swift-2-flatmap/\\\">https://www.natashatherobot.com/swift-2-flatmap/</a></li>\\n<li><a href=\\\"https://gist.github.com/samgiles/762ee337dff48623e729\\\">https://gist.github.com/samgiles/762ee337dff48623e729</a></li>\\n<li><a href=\\\"http://www.infoq.com/cn/articles/swift-brain-gym-map-and-flatmap\\\">Swift çƒ§è„‘ä½“æ“ï¼ˆå››ï¼‰ - map å’Œ flatMap</a></li>\\n</ul>\",\"frontmatter\":{\"title\":\"è°ˆè°ˆ `flatMap`\",\"date\":\"November 25, 2017\"}}},\"pathContext\":{\"slug\":\"/flatmap/\",\"previous\":{\"fields\":{\"slug\":\"/centering-in-css/\"},\"frontmatter\":{\"title\":\"CSS å±…ä¸­å°ç»“\"}},\"next\":{\"fields\":{\"slug\":\"/define-constants-in-laravel/\"},\"frontmatter\":{\"title\":\"åœ¨ Laravel ä¸­ä¼˜é›…åœ°å®šä¹‰å¸¸é‡\"}}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/flatmap.json\n// module id = 514\n// module chunks = 205135340147305"],"sourceRoot":""}